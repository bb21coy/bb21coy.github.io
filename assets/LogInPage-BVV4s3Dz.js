import{u as h,r,j as s}from"./index-D47I_7n0.js";import{a as d}from"./index-NIGUFBhG.js";import{B as i}from"./Constants-B3OfrIZX.js";import{h as l,s as o}from"./handleServerError-BHmHb0ds.js";const j=()=>{const t=h(),[n,m]=r.useState(""),[u,c]=r.useState("");r.useEffect(()=>{d.get(`${i}/auth`,{headers:{"x-route":"/check_session"},withCredentials:!0}).then(e=>{e.data.valid&&t("/home")}).catch(e=>{console.log(e.response.data),l(e.response.data.status)})},[t]);function p(e){if(e.preventDefault(),!n||!u)return o("Please enter both username and password");d.post(`${i}/auth`,{username:n,password:u},{headers:{"x-route":"/login"},withCredentials:!0}).then(a=>{a.data.message&&o(a.data.message,"success"),t("/home")}).catch(a=>{a.response.status===401?o("Incorrect username or password"):l(a.response.status)})}return s.jsx("div",{className:"log-in-page",style:{background:'url("/images/slide 2.webp") center/cover no-repeat'},children:s.jsxs("form",{className:"log-in-form",onSubmit:p,noValidate:!0,children:[s.jsxs("h2",{children:["BB 21",s.jsx("sup",{children:"st"})," Portal"]}),s.jsx("label",{htmlFor:"username",children:"Username:"}),s.jsx("input",{type:"text",name:"username",id:"username",placeholder:"Enter Username",required:!0,autoComplete:"username",onChange:e=>m(e.target.value)}),s.jsx("label",{htmlFor:"password",children:"Password:"}),s.jsx("input",{type:"password",name:"password",id:"password",placeholder:"Enter Password",required:!0,autoComplete:"current-password",onChange:e=>c(e.target.value)}),s.jsx("br",{}),s.jsx("button",{children:"Log In"})]})})};export{j as default};
