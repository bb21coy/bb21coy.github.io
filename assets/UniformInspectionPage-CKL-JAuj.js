import{r,j as e}from"./index-D47I_7n0.js";import{a}from"./index-NIGUFBhG.js";import{h as x}from"./handleServerError-BHmHb0ds.js";const v=()=>{const[i,o]=r.useState(),[c,d]=r.useState({sec1:!0,sec2:!0,sec3:!0,sec4:!0,sec5:!0});a.post("/application/0/check_session",{},{withCredentials:!0}).then(s=>{s.data.user?.account_type=="Boy"&&(window.location.href="/home")}).catch(()=>{window.location.href="/"}),r.useEffect(()=>{a.post("/api/uniform_inspection/0/get_inspections",{},{withCredentials:!0}).then(s=>{o(s.data)}).catch(s=>x(s.response.status))},[]);function h(){window.location.href="/uniform_inspection_form"}function l(){const s=document.getElementById("search").value.toLowerCase();document.querySelectorAll(".uniform-inspection-list-table div").forEach(n=>{const p=Array.from(n.children).slice(1,-1).some(f=>f.textContent.toLowerCase().includes(s)),u=c[n.getAttribute("data-sec")]===!0;n.style.display=p&&u?"contents":"none"})}function t(s){d({...c,[s.target.id.split("-")[0]]:!c[s.target.id.split("-")[0]]})}return r.useEffect(()=>{l()},[c]),e.jsx("div",{className:"uniform-inspection-page",children:e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"uniform-inspection-filter",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"search",children:[e.jsx("i",{className:"fa-solid fa-magnifying-glass"}),"Search"]}),e.jsx("input",{type:"search",id:"search",name:"search",placeholder:"Search Boy",onInput:l})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"sec1-filter",defaultChecked:c.sec1,onChange:t}),e.jsx("label",{htmlFor:"sec1-filter",children:"Sec 1"}),e.jsx("input",{type:"checkbox",id:"sec2-filter",defaultChecked:c.sec2,onChange:t}),e.jsx("label",{htmlFor:"sec2-filter",children:"Sec 2"}),e.jsx("input",{type:"checkbox",id:"sec3-filter",defaultChecked:c.sec3,onChange:t}),e.jsx("label",{htmlFor:"sec3-filter",children:"Sec 3"}),e.jsx("input",{type:"checkbox",id:"sec4-filter",defaultChecked:c.sec4,onChange:t}),e.jsx("label",{htmlFor:"sec4-filter",children:"Sec 4"}),e.jsx("input",{type:"checkbox",id:"sec5-filter",defaultChecked:c.sec5,onChange:t}),e.jsx("label",{htmlFor:"sec5-filter",children:"Sec 5"})]})]}),e.jsx("h2",{children:"Latest Uniform Inspection"}),i!=null?e.jsxs("div",{className:"uniform-inspection-list-table",children:[e.jsx("p",{children:"No."}),e.jsx("p",{children:"Name"}),e.jsx("p",{children:"Score"}),e.jsx("p",{children:"Date"}),e.jsx("p",{children:"Assessor"}),e.jsx("p",{children:"Records"}),i.boys.map((s,n)=>i[s.id]==null?e.jsxs("div",{"data-sec":"sec"+s.level,children:[e.jsx("p",{children:n+1}),e.jsx("p",{children:s.account_name}),e.jsx("p",{children:"-"}),e.jsx("p",{children:"-"}),e.jsx("p",{children:"-"}),e.jsx("p",{children:"-"})]},s.account_name):e.jsxs("div",{id:i[s.id].id,"data-sec":"sec"+s.level,children:[e.jsx("p",{children:n+1}),e.jsx("p",{children:s.account_name}),e.jsx("p",{children:i[s.id].total_score}),e.jsx("p",{children:i[s.id].date}),e.jsx("p",{children:i[i[s.id].assessor_id].account_name}),e.jsx("p",{"aria-label":"View Uniform Inspection Record",children:e.jsx("a",{href:"/view_uniform_inspection/"+i[s.id].id,children:e.jsx("i",{className:"fa-solid fa-up-right-from-square"})})})]},i[s.id].id))]}):e.jsx("p",{children:"No Uniform Inspections Available"}),e.jsx("button",{onClick:h,id:"conduct-inspection-button",children:"Conduct Inspection"})]})})};export{v as UniformInspectionPage};
