import{j as e,u as x,r as m}from"./index-D47I_7n0.js";import{a as p}from"./index-NIGUFBhG.js";import{P as h}from"./index-ByQDDAS8.js";import{h as g}from"./handleServerError-BHmHb0ds.js";import{B as y}from"./Constants-B3OfrIZX.js";const j=({accountType:o,appointment:r,userId:i,paradesAfterToday:n})=>{function c(){const l=(6-new Date().getDay()+7)%7;return{days:l===0?"Today":l,lessThanTwoDays:l<2}}return e.jsxs("div",{className:"pending-tasks",children:[e.jsx("h2",{children:"Pending Tasks"}),e.jsxs("div",{className:"tasks",children:[n.length>0&&e.jsxs("ol",{children:[n.length>0&&n.map(t=>e.jsxs("li",{children:["There is an upcoming Parade on ",new Date(t.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]},t.id+"upcoming")),n.length>0&&n.map(t=>["do","dt","flag_bearer","cos"].map(a=>{if(t[`${a}_id`]&&t[`${a}_id`]==i)return e.jsxs("li",{children:["You are the ",e.jsx("strong",{children:a==="flag_bearer"?"Flag Bearer":a.toUpperCase()})," for the upcoming ",new Date(t.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})," Parade"]},t.id+a)})),n.length===0&&c().lessThanTwoDays&&(["Admin","Officer"].includes(o)||["CSM","DY CSM","Admin Sergeant"].includes(r))&&e.jsxs("li",{children:["The Parade Notice for this coming Saturday has not been created. Days to Saturday: ",c().days]})]}),n.length===0&&e.jsxs("div",{children:[e.jsx("i",{className:"fa-solid fa-party-horn"}),e.jsx("p",{children:"No Pending Tasks"})]})]})]})};j.propTypes={accountType:h.string,appointment:h.string,userId:h.number,paradesAfterToday:h.array};const s=({title:o,url:r=null,icon:i=null,image:n=null,func:c=null})=>{const t=x();return e.jsxs("div",{onClick:r?()=>t(r):c,children:[n?e.jsx("img",{src:n,alt:"Dashboard Icon"}):e.jsx("i",{className:`fa-solid fa-${i}`}),e.jsx("p",{children:o})]})},v=()=>{const o=x(),[r,i]=m.useState(null),[n,c]=m.useState([]),[t,a]=m.useState({account_name:"",account_type:"Boy",appointment:null});m.useEffect(()=>{async function u(){try{const d=await p.get(`${y}/account`,{headers:{"x-route":"/get_own_account"},withCredentials:!0});a(d.data),i(d.data.id)}catch(d){g(d.response.status)}}u()},[a]);const l=async()=>{try{(await p.post(`${y}/auth`,{},{headers:{"x-route":"/logout"},withCredentials:!0})).data&&o("/")}catch(u){console.error("Error logging out:",u),g(u.response.status)}};return e.jsxs("div",{className:"dashboard",children:[e.jsxs("h2",{children:["Hello, ",t?`${t.account_type!=="Admin"&&t.rank===null?t.honorifics:t.account_type=="Admin"?"":t.rank} ${t.account_name}`:""]}),e.jsxs("div",{className:"dashboard-routes",children:[t?.account_type==="Admin"&&e.jsx(s,{title:"Admin Page",icon:"gear",url:"/admin"}),t?.account_type==="Boy"&&e.jsxs(e.Fragment,{children:[e.jsx(s,{title:"My Awards",icon:"award",url:"/user_awards"}),e.jsx(s,{title:"My Inspections Results",icon:"shirt-long-sleeve",url:"/user_inspections"})]}),(t?.account_type!=="Boy"||t?.appointment!==null)&&e.jsx(s,{title:"User Management",icon:"users",url:"/user_management"}),(t.account_type==="Officer"||t.appointment?.toLowerCase().includes("tech"))&&e.jsx(s,{title:"Home Page Editor",icon:"edit",url:"home_editor"}),e.jsx(s,{title:"Parade & Attendance",icon:"file",url:"/attendance_management"}),(t?.account_type!=="Boy"||t?.appointment!==null)&&e.jsxs(e.Fragment,{children:[e.jsx(s,{title:"Awards Management",url:"/awards",image:"images/awards_tracker.webp"}),e.jsx(s,{title:"Results Generation",icon:"file-invoice",url:"/generate_result"})]}),t?.account_type!=="Boy"&&e.jsx(s,{title:"Uniform Inspection",icon:"shirt-long-sleeve",url:"/uniform_inspection"}),e.jsx(s,{title:"Change Password",icon:"rotate-right",url:"/reset_password"}),e.jsx(s,{title:"Help",icon:"question",url:"/help"}),e.jsx(s,{title:"Log Out",icon:"lock",func:l})]}),e.jsx(j,{accountType:t.account_type,appointment:t.appointment,userId:r,paradesAfterToday:n})]})};export{v as default};
