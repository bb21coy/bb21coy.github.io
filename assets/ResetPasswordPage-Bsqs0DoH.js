import{r as t,j as e}from"./index-D47I_7n0.js";import{B as d}from"./Constants-B3OfrIZX.js";import{a as i}from"./index-NIGUFBhG.js";import{h as l,s as p}from"./handleServerError-BHmHb0ds.js";const N=()=>{const[o,m]=t.useState(),[r,w]=t.useState("password"),[n,h]=t.useState(""),[u,c]=t.useState("");t.useEffect(()=>{async function s(){try{const a=await i.get(`${d}/account`,{headers:{"x-route":"/get_own_account"},withCredentials:!0});m(a.data),c(a.data.user_name)}catch(a){l(a.response.status)}}s()},[]);async function f(s){try{if(s.preventDefault(),u===""||n==="")return p("Please fill in all fields");if(!s.target.checkValidity())return;await i.put(`${d}/account`,{username:u,password:n},{headers:{"x-route":"/update_username_password"},withCredentials:!0}),p("Account updated successfully","success")}catch(a){console.error(a),l(a.response.status)}}return e.jsx("div",{className:"reset-password-page",children:e.jsxs("div",{className:"user-information",children:[e.jsx("h1",{children:"Reset Username and Password"}),o!=null&&e.jsxs("form",{className:"edit-account-form",onSubmit:f,noValidate:!0,children:[e.jsx("label",{htmlFor:"user_name",children:"Username:"}),e.jsx("input",{className:"edit-field",type:"text",required:!0,defaultValue:o.user_name,id:"user_name",autoComplete:"username",onChange:s=>c(s.target.value)}),e.jsx("span",{}),e.jsx("label",{htmlFor:"password",children:"New Password:"}),e.jsx("input",{type:r,className:"edit-field",required:!0,id:"password",placeholder:"Enter New Password",autoComplete:"new-password",onChange:s=>h(s.target.value)}),e.jsx("i",{className:`fa-solid ${r==="password"?"fa-eye":"fa-eye-slash"}`,onClick:()=>w(r==="password"?"text":"password")}),e.jsx("button",{className:"edit-button",children:"Save Changes"})]})]})})};export{N as ResetPasswordPage};
